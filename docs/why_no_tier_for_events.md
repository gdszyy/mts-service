# 为什么比赛不使用层级维度？

## 问题

在联赛热门度评分中，我们使用了**二维模型**（联赛层级 + 市场深度），但在比赛热门度评分中只使用了**单维度模型**（市场数量）。为什么比赛不加入联赛层级维度？是因为没有区分度吗？

## 答案：经过数据验证，确实不需要

通过对 **626 场有效比赛**的数据分析，我们得出了明确的结论：**比赛不需要加入联赛层级维度**。

## 数据验证结果

### 1. 强正相关性（r = 0.767）

**联赛得分与比赛市场数的相关系数为 0.767**，这是一个非常强的正相关关系。

这意味着：
- 高层级联赛的比赛，自然会有更多的市场
- 低层级联赛的比赛，市场数量也相应较少
- **市场数量已经隐含了联赛层级的信息**

### 2. 按联赛层级分组的市场数统计

| 联赛层级得分 | 比赛数 | 平均市场数 | 标准差 |
|------------|--------|-----------|--------|
| 10 | 23 | 163.57 | 53.76 |
| 9 | 27 | **224.78** | 148.05 |
| 8 | 34 | 193.74 | 143.17 |
| 7 | 138 | 197.80 | 149.63 |
| 6 | 385 | 137.37 | 97.90 |
| 4 | 19 | 79.63 | 18.82 |

**关键发现**：
- 层级 9 的比赛平均市场数最高（224.78），这是因为包含了 NBA、欧冠等顶级赛事
- 层级 6-8 的比赛平均市场数相近（137-198），说明市场数量能够很好地反映联赛层级
- 层级 4 的比赛市场数明显较低（79.63），与高层级联赛形成鲜明对比

### 3. 同一联赛内的变异系数（CV = 0.375）

**同一联赛内比赛市场数的平均变异系数为 0.375**，属于中等变异水平。

这意味着：
- 同一联赛内的不同比赛，市场数量有一定差异（例如：常规赛 vs 季后赛，强队对决 vs 弱队对决）
- 但这种差异是**比赛本身的热门度差异**，而不是联赛层级的差异
- 如果强行加入联赛层级，会**削弱比赛本身的热门度区分度**

### 4. 典型案例分析

#### 案例 1：NBA（联赛层级 9，联赛得分 9.0）
- 比赛数：9 场
- 平均市场数：420.78
- 变异系数：0.08（非常低）

**解读**：NBA 的所有比赛市场数都很高且稳定，市场数量已经充分反映了其顶级联赛的地位。

#### 案例 2：NCAA 常规赛（联赛层级 6，联赛得分 6.5）
- 比赛数：92 场
- 平均市场数：114.24
- 变异系数：0.46（中等）

**解读**：NCAA 比赛的市场数差异较大，这是因为有些比赛是强队对决（如 Duke vs UNC），有些是普通比赛。如果加入联赛层级，会让所有 NCAA 比赛的得分都趋向于 6 分，**无法区分强队对决和普通比赛**。

## 可视化分析

生成的图表（`event_tournament_correlation.png`）显示：

1. **联赛层级 vs 平均市场数**：呈现明显的正相关趋势
2. **散点图**：联赛得分与比赛市场数高度相关（r=0.767）
3. **箱线图**：不同层级联赛的比赛市场数分布有明显差异
4. **得分分布对比**：如果加入联赛层级，会导致得分分布更加集中，**降低区分度**

## 结论：奥卡姆剃刀原则

> "如无必要，勿增实体"（Entities should not be multiplied without necessity）

### ✅ 不需要为比赛加入联赛层级维度的三大理由

#### 1. 信息冗余
- 市场数量与联赛层级高度相关（r=0.767）
- 市场数量已经隐含了联赛层级的信息
- 加入层级维度会产生**信息冗余**，不会带来额外价值

#### 2. 区分度下降
- 同一联赛内比赛的市场数有合理的差异（CV=0.375）
- 这种差异反映了比赛本身的热门度（如：强队对决 vs 弱队对决）
- 如果加入联赛层级，会让同一联赛的所有比赛得分趋同，**降低区分度**

#### 3. 简洁性原则
- 单维度模型简洁、高效、易于理解
- 二维模型会增加复杂度，但不会带来显著的准确性提升
- 符合**奥卡姆剃刀原则**：在效果相同的情况下，选择最简单的模型

## 对比：为什么联赛需要层级维度？

联赛和比赛的情况不同：

| 维度 | 比赛 | 联赛 |
|------|------|------|
| **市场数与层级相关性** | 强相关（r=0.767） | 中等相关 |
| **同一层级内的差异** | 反映比赛本身热门度 | 反映联赛市场成熟度 |
| **是否需要层级** | ❌ 不需要 | ✅ 需要 |

对于联赛：
- 同一层级的联赛（如都是国家顶级联赛），市场深度可能差异很大（如英超 vs 某小国联赛）
- 需要用**层级维度**来反映联赛的固有声望，用**市场深度维度**来反映实际市场表现
- 两个维度互补，提供更全面的评估

对于比赛：
- 市场数量本身就综合反映了联赛层级和比赛热门度
- 不需要额外的层级维度

## 最终建议

**保持当前的单维度模型（仅市场数量）**，理由如下：

1. ✅ **准确性**：市场数量已经充分反映了比赛的热门度
2. ✅ **区分度**：能够区分同一联赛内不同比赛的热门程度
3. ✅ **简洁性**：模型简单，易于理解和维护
4. ✅ **效率**：计算快速，无需额外的联赛层级查询

如果未来业务需求变化，或者发现市场数量与实际热门度出现偏差，可以考虑引入其他维度（如用户投注数据、浏览量等），但**不建议引入联赛层级维度**。

---

**数据来源**: Railway PostgreSQL (betradar-uof-service)
**分析样本**: 626 场有效比赛
**分析日期**: 2025-11-27
